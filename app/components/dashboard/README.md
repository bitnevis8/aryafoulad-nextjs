# داشبورد نمودارها

این پوشه شامل کامپوننت‌های نمودار برای داشبورد سیستم است که با استفاده از Chart.js و react-chartjs-2 ایجاد شده‌اند.

## کامپوننت‌های موجود

### 1. DashboardCharts.js
کامپوننت اصلی داشبورد که شامل:
- تب‌های مختلف برای نمایش نمودارها
- نمای کلی با کارت‌های آماری
- نمایش وضعیت سیستم

### 2. نمودارهای تخصصی

#### RatesChart.js
- نمودار دایره‌ای وضعیت نرخ‌ها (فعال، غیرفعال، آینده، منقضی)
- نمودار میله‌ای نرخ‌های فعال
- جدول نرخ‌های اخیر
- کارت‌های آماری خلاصه

#### UsersChart.js
- نمودار دایره‌ای وضعیت کاربران (فعال، غیرفعال، تایید شده، تایید نشده)
- نمودار میله‌ای کاربران بر اساس نقش
- نمودار خطی ثبت‌نام ماهانه
- جدول کاربران اخیر

#### MissionsChart.js
- نمودار دایره‌ای وضعیت ماموریت‌ها (تکمیل شده، در انتظار، لغو شده، در حال انجام)
- نمودار میله‌ای ماموریت‌های ماهانه
- نمودار خطی مسافت طی شده ماهانه
- جدول ماموریت‌های اخیر

#### EquipmentChart.js
- نمودار دایره‌ای وضعیت تجهیزات (موجود، تخصیص داده شده، در تعمیر، بازنشسته)
- نمودار میله‌ای تجهیزات بر اساس نوع
- نمودار خطی کالیبراسیون ماهانه
- جدول تجهیزات اخیر

## نحوه استفاده

### نصب وابستگی‌ها
```bash
npm install chart.js react-chartjs-2 @radix-ui/react-tabs clsx tailwind-merge
```

### استفاده در صفحه
```jsx
import DashboardCharts from '@/components/dashboard/DashboardCharts';

export default function DashboardPage() {
  return (
    <div className="container mx-auto p-6">
      <DashboardCharts />
    </div>
  );
}
```

### استفاده جداگانه
```jsx
import RatesChart from '@/components/dashboard/charts/RatesChart';
import UsersChart from '@/components/dashboard/charts/UsersChart';

// استفاده از نمودار نرخ‌ها
<RatesChart />

// استفاده از نمودار کاربران
<UsersChart />
```

## ویژگی‌ها

### 1. کامپوننت محور
هر نمودار یک کامپوننت مستقل است که می‌تواند در هر جای دیگری استفاده شود.

### 2. کلاینت ساید
تمام نمودارها در سمت کلاینت رندر می‌شوند و نیازی به SSR ندارند.

### 3. ریسپانسیو
نمودارها به صورت خودکار با اندازه صفحه تطبیق می‌یابند.

### 4. فونت فارسی
از فونت Vazirmatn برای نمایش متن‌های فارسی استفاده می‌شود.

### 5. رنگ‌بندی مناسب
هر نوع داده با رنگ مخصوص خود نمایش داده می‌شود:
- سبز: فعال، تکمیل شده، موجود
- آبی: تایید شده، تخصیص داده شده، در حال انجام
- نارنجی: در انتظار، در تعمیر، نیازمند کالیبراسیون
- قرمز: غیرفعال، لغو شده، منقضی
- خاکستری: بازنشسته، غیرفعال

## API Endpoints مورد نیاز

### نرخ‌ها
- `GET /api/rateSettings/getAll` - دریافت تمام نرخ‌ها
- `GET /api/rateSettings/getStatus` - دریافت وضعیت نرخ‌ها

### کاربران
- `GET /api/user/getAll` - دریافت تمام کاربران
- `GET /api/user/roles/getAll` - دریافت تمام نقش‌ها

### ماموریت‌ها
- `GET /api/missionOrder/getAll` - دریافت تمام ماموریت‌ها

### تجهیزات
- `GET /api/equipment/getAll` - دریافت تمام تجهیزات

## سفارشی‌سازی

### تغییر رنگ‌ها
می‌توانید رنگ‌های نمودارها را در فایل‌های مربوطه تغییر دهید:

```javascript
backgroundColor: [
  'rgba(34, 197, 94, 0.8)', // سبز
  'rgba(59, 130, 246, 0.8)', // آبی
  'rgba(245, 158, 11, 0.8)', // نارنجی
  'rgba(239, 68, 68, 0.8)'  // قرمز
]
```

### تغییر اندازه
برای تغییر اندازه نمودارها، کلاس `h-64` را در `CardContent` تغییر دهید:

```jsx
<CardContent>
  <div className="h-96"> {/* تغییر از h-64 به h-96 */}
    <Doughnut data={chartData} options={options} />
  </div>
</CardContent>
```

### اضافه کردن نمودار جدید
1. فایل جدید در پوشه `charts` ایجاد کنید
2. از الگوی موجود استفاده کنید
3. در `DashboardCharts.js` import کنید
4. تب جدید اضافه کنید

## نکات مهم

1. **خطاهای API**: تمام کامپوننت‌ها خطاهای API را مدیریت می‌کنند
2. **Loading State**: حالت بارگذاری برای تمام نمودارها تعریف شده
3. **Empty State**: برای حالتی که داده‌ای وجود ندارد، پیام مناسب نمایش داده می‌شود
4. **Performance**: نمودارها فقط زمانی که در viewport هستند رندر می‌شوند
5. **Accessibility**: از ARIA attributes مناسب استفاده شده است 